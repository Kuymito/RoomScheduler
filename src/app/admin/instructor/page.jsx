import { Suspense } from 'react';
import AdminLayout from '@/components/AdminLayout';
import InstructorPageSkeleton from './components/InstructorPageSkeleton';
import InstructorClientView from './components/InstructorClientView'; // We will create this next

/**
 * Mock data fetching function. In a real app, this would fetch from your database.
 * Since this is a Server Component, this function runs on the server, not in the browser.
 */
const fetchInstructorData = async () => {
    const initialInstructorData = [
<<<<<<< HEAD
        // { id: 1, name: 'Sok Mean', firstName: 'Sok', lastName: 'Mean', email: 'sok.mean@example.com', phone: '012345678', majorStudied: 'Computer Science', qualifications: 'PhD', status: 'active', profileImage: 'https://i.pravatar.cc/150?img=68' },
        // { id: 2, name: 'Sok Chan', firstName: 'Sok', lastName: 'Chan', email: 'sok.chan@example.com', phone: '012345679', majorStudied: 'Information Technology', qualifications: 'Master', status: 'active', profileImage: 'https://i.pravatar.cc/150?img=52' },
        // { id: 3, name: 'Dara Kim', firstName: 'Dara', lastName: 'Kim', email: 'dara.kim@example.com', phone: '012345680', majorStudied: 'Information Systems', qualifications: 'Professor', status: 'active', profileImage: null },
        // { id: 4, name: 'Lina Heng', firstName: 'Lina', lastName: 'Heng', email: 'lina.heng@example.com', phone: '012345681', majorStudied: 'Artificial Intelligence', qualifications: 'PhD', status: 'archived', profileImage: 'https://i.pravatar.cc/150?img=25' },
        // { id: 5, name: 'Virak Chea', firstName: 'Virak', lastName: 'Chea', email: 'virak.chea@example.com', phone: '012345682', majorStudied: 'Data Science', qualifications: 'Master', status: 'active', profileImage: 'https://i.pravatar.cc/150?img=33' },
        // { id: 6, name: 'Sophea Nov', firstName: 'Sophea', lastName: 'Nov', email: 'sophea.nov@example.com', phone: '012345683', majorStudied: 'Machine Learning', qualifications: 'Lecturer', status: 'active', profileImage: null },
        // { id: 7, name: 'Chanthy Pen', firstName: 'Chanthy', lastName: 'Pen', email: 'chanthy.pen@example.com', phone: '012345684', majorStudied: 'Data Analytics', qualifications: 'Associate Professor', status: 'active', profileImage: 'https://i.pravatar.cc/150?img=17' },
        // { id: 8, name: 'Vicheka Sreng', firstName: 'Vicheka', lastName: 'Sreng', email: 'vicheka.sreng@example.com', phone: '012345685', majorStudied: 'Software Engineering', qualifications: 'PhD', status: 'archived', profileImage: 'https://i.pravatar.cc/150?img=41' },

         { id: 1, name: 'PhySOM', firstName: 'Phy', lastName: 'SOM', email: 'physom@gmail.com', phone: '012345678', majorStudied: 'Research Methodology', qualifications: 'PhD', status: 'active', profileImage: 'https://media.licdn.com/dms/image/v2/C5603AQFztJoAXb0vTQ/profile-displayphoto-shrink_200_200/profile-displayphoto-shrink_200_200/0/1616584101352?e=2147483647&v=beta&t=LTffaDKSkt4qCR2VgtDbeRkKF8Trhm_pqe-T7tlvbXk' },
        { id: 2, name: 'Sam Vicheka', firstName: 'Sam', lastName: 'Vicheka', email: 'Sam Vicheka.com', phone: '093956789', majorStudied: 'Network', qualifications: 'Master', status: 'active', profileImage: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_UOl581yD7ebvnmXxGNIZiqRT4NTHD33igA&s' },
        { id: 3, name: 'Sreng Vichet', firstName: 'Sreng', lastName: 'Vichet', email: 'srengvichet@gmail.com', phone: '012345680', majorStudied: 'Information Technology', qualifications: 'Professor', status: 'active', profileImage: 'data:image/jpeg;base64,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' }, // No image
        { id: 4, name: 'Kang Sovannara', firstName: 'Kang', lastName: 'Sovannara', email: 'kangsovvanara@gmail.com', phone: '012345681', majorStudied: 'Management of Change / Business / Investment Management', qualifications: 'PhD', status: 'archived', profileImage: 'https://num.e-khmer.com/wp-content/uploads/2023/09/DrKang-Sovannara-e1693628853981.png' },
        { id: 5, name: 'Sok Seang', firstName: 'Sok', lastName: 'Seang', email: 'sokseang@gmail.com', phone: '012345682', majorStudied: 'Entrepreneurship', qualifications: 'PhD', status: 'active', profileImage: 'https://num.e-khmer.com/wp-content/uploads/2023/09/DrSok-Seang-e1693629096526.png' },
        { id: 6, name: 'Phim Runsinarith', firstName: 'Phim', lastName: 'Runsinarith', email: 'phimrunsinarith@gamil.com', phone: '012345683', majorStudied: 'Research / Economics', qualifications: 'PhD', status: 'active', profileImage: 'https://num.e-khmer.com/wp-content/uploads/2023/09/DrPhim-Runsinarith-1-e1693629343364.png' },
        { id: 7, name: 'Ly Sok Heng', firstName: 'Ly', lastName: 'Sok Heng', email: 'sokheng@gamil.com', phone: '012345684', majorStudied: 'Economics/ Finance', qualifications: 'PhD', status: 'active', profileImage: 'https://num.e-khmer.com/wp-content/uploads/2023/09/Dr-Ly-Sok-Heng-e1693626068844.png' },
        { id: 8, name: 'Heng Dyna', firstName: 'Heng', lastName: 'Dyna', email: 'hengdyna@gamil.com', phone: '012345684', majorStudied: 'Economics/ Finance', qualifications: 'PhD', status: 'active', profileImage: 'https://num.e-khmer.com/wp-content/uploads/2023/09/Dr-Heng-Dyna.png' }, 
=======
        { id: 1, name: 'PhySOM', firstName: 'Phy', lastName: 'SOM', email: 'physom@gmail.com', phone: '012345678', majorStudied: 'Research Methodology', qualifications: 'PhD', status: 'active', profileImage: '/images/instructor/PhaySOM.jpeg' },
        { id: 2, name: 'Sam Vicheka', firstName: 'Sam', lastName: 'Vicheka', email: 'Sam Vicheka.com', phone: '093956789', majorStudied: 'Network', qualifications: 'Master', status: 'active', profileImage: '/images/instructor/Sam Vicheka.jpeg' },
        { id: 3, name: 'Sreng Vichet', firstName: 'Sreng', lastName: 'Vichet', email: 'srengvichet@gmail.com', phone: '012345680', majorStudied: 'Information Technology', qualifications: 'Professor', status: 'active', profileImage: '/images/instructor/Sreng Vichet.jpeg' }, 
        { id: 4, name: 'Kang Sovannara', firstName: 'Kang', lastName: 'Sovannara', email: 'kangsovvanara@gmail.com', phone: '012345681', majorStudied: 'Management of Change / Business / Investment Management', qualifications: 'PhD', status: 'archived', profileImage: '/images/instructor/Kang Sovannara.png' },
        { id: 5, name: 'Sok Seang', firstName: 'Sok', lastName: 'Seang', email: 'sokseang@gmail.com', phone: '012345682', majorStudied: 'Entrepreneurship', qualifications: 'PhD', status: 'active', profileImage: '/images/instructor/Sok Seang.png' },
        { id: 6, name: 'Phim Runsinarith', firstName: 'Phim', lastName: 'Runsinarith', email: 'phimrunsinarith@gamil.com', phone: '012345683', majorStudied: 'Research / Economics', qualifications: 'PhD', status: 'active', profileImage: '/images/instructor/Phim Runsinarith.png' },
        { id: 7, name: 'Ly Sok Heng', firstName: 'Ly', lastName: 'Sok Heng', email: 'sokheng@gamil.com', phone: '012345684', majorStudied: 'Economics/ Finance', qualifications: 'PhD', status: 'active', profileImage: '/images/instructor/Ly Sok Heng.png' },
        { id: 8, name: 'Heng Dyna', firstName: 'Heng', lastName: 'Dyna', email: 'hengdyna@gamil.com', phone: '012345684', majorStudied: 'Economics/ Finance', qualifications: 'PhD', status: 'active', profileImage: '/images/instructor/Heng Dyna.png' }, 
>>>>>>> 4ff0f2f01e6dc69dd29f65eec7cf1d126de91b84
    ];

    // Simulate network delay
    await new Promise(resolve => setTimeout(resolve, 500));
    return initialInstructorData;
};


/**
 * The main page component is now an async Server Component.
 */
export default async function AdminInstructorsPage() {
    // Data is fetched on the server before the page is sent to the client.
    const initialInstructors = await fetchInstructorData();

    return (
        <AdminLayout activeItem="instructor" pageTitle="Instructor Management">
            <Suspense fallback={<InstructorPageSkeleton />}>
                 {/* We render the Client Component here, passing the server-fetched data as a prop.
                   The browser will receive the pre-rendered HTML for the table, making the initial
                   load appear instant. Then, the client-side JavaScript will load to make it interactive.
                 */}
                <InstructorClientView initialInstructors={initialInstructors} />
            </Suspense>
        </AdminLayout>
    );
}
